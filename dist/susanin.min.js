!function(t){function e(t){return{"./querystring":function(){var t={},e=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=function(t){return"[object Array]"===r.call(t)},a={decode:function(t){var e;try{e=decodeURIComponent(t.replace(/\+/g,"%20"))}catch(r){e=t}return e},parse:function(t,r,o){var s,i,p,u,f,h,l,c={};if("string"!=typeof t||""===t)return c;for(r||(r="&"),o||(o="="),s=t.split(r),u=0,f=s.length;f>u;++u)h=a.decode(s[u]),l=h.indexOf(o),l>=0?(p=h.substr(0,l),i=h.substr(l+1)):(p=h,i=""),e.call(c,p)?n(c[p])?c[p].push(i):c[p]=[c[p],i]:c[p]=i;return c},stringify:function(t,r,n){var a,o,s,i,p,u,f="";if(!t)return f;r||(r="&"),n||(n="=");for(u in t)if(e.call(t,u))for(s=[].concat(t[u]),i=0,p=s.length;p>i;++i)o=typeof s[i],a="object"===o||"undefined"===o?"":encodeURIComponent(s[i]),f+=r+encodeURIComponent(u)+n+a;return f.substr(r.length)}};return t.exports=a,t.exports},"./route":function(){function t(e){return this instanceof t?(this._setOptions(e),void 0):new t(e)}var r={},n=Object.prototype.hasOwnProperty,a=function(t,e){return n.call(t,e)},o=Object.prototype.toString,s=function(t){return"[object Array]"===o.call(t)},i=e("./querystring"),p=function(){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],e=new RegExp("(\\"+t.join("|\\")+")","g");return function(t){return t.replace(e,"\\$1")}}(),u=String(Math.random()).substr(2,5),f="<",h=">",l="(",c=")",m="[a-zA-Z_][\\w\\-]*",d="[\\w\\-\\.~]+",g=1,_=2,P=1,y=new RegExp("("+p(f)+m+p(h)+"|"+"[^"+p(f)+p(h)+"]+"+"|"+p(f)+"|"+p(h)+")","g"),b="ts_"+u,x="/",v=p("/"),R="pattern_"+u,E="qs_"+u;return t.prototype._setOptions=function(t){var e=t;if("string"==typeof e&&(e={pattern:e}),!e||"object"!=typeof e)throw new Error("You must specify options");this._options=e,this._setConditions(this._options.conditions),this._setPatterns(this._options.pattern)},t.prototype._setConditions=function(t){var e=this._options;this._conditions=t&&"object"==typeof t?t:{},e.isTrailingSlashOptional!==!1&&(this._conditions[b]=v),this._conditions[E]=".*"},t.prototype._setPatterns=function(t){var e,r,n,a,o,i,p,u,m,d=this._options;for(e={name:R,test:t},r=s(t)?t:[e],this._patterns={},this._patternNames=[],n=0,a=r.length;a>n;n++){if(o=r[n],i=o.name,p=o.test,"string"!=typeof p||"string"!=typeof i)throw new Error("You must specify the pattern of the route");d.isTrailingSlashOptional!==!1&&(p+=l+f+b+h+c),p+=l+"?"+f+E+h+c,u=this._parsePattern(p),m={name:i,test:p,params:u.params,mainParams:u.mainParams,requiredParams:u.requiredParams,optionalParams:u.optionalParams,parts:u.parts},this._buildParseRegExp(m),this._buildBuildFn(m),this._patterns[i]=m,this._patternNames.push(i)}},t.prototype._parsePattern=function(t,e){var r,n,a,o,s,i,p="",u=0,f=0,h=!1,m=t.length;i={parts:[],params:[],mainParams:[],requiredParams:[],optionalParams:[]};for(var d=function(t,e){var r,n,a;for(r=0,n=t.length;n>r;r++)a=t[r],i.params.push(a),i.mainParams[a]=!0,-1!==e.indexOf(a)?i.requiredParams.push(a):i.optionalParams.push(a)},g=function(t){var e,r,n;for(e=0,r=t.length;r>e;e++)n=t[e],i.parts.push(n)};m>u;)if(r=t.charAt(u++),r===l)h?(++f,p+=r):(s=this._parseParams(p,e),d(s.params,s.requiredParams),g(s.parts),p="",f=0,h=!0);else if(r===c)if(h)if(0===f){for(s=this._parsePattern(p,!0),p={what:"optional",dependOnParams:[],parts:s.parts},d(s.params,s.requiredParams),g([p]),n=0,a=p.parts.length;a>n;++n)o=p.parts[n]&&p.parts[n].what,"param"===o?p.dependOnParams.push(p.parts[n].name):"optional"===o&&p.dependOnParams.push.apply(p.dependOnParams,p.parts[n].dependOnParams);p="",h=!1}else--f,p+=r;else p+=r;else p+=r;return s=this._parseParams(p,e),d(s.params,s.requiredParams),g(s.parts),i},t.prototype._parseParams=function(t,e){var r,n,a,o,s,i=t.match(y);if(s={parts:[],params:[],requiredParams:[]},i)for(r=0,n=i.length;n>r;++r)a=i[r],a.charAt(0)===f&&a.charAt(a.length-1)===h?(o=a.substr(1,a.length-2),s.params.push(o),s.parts.push({what:"param",name:o}),e||s.requiredParams.push(o)):s.parts.push(a);return s},t.prototype._buildParseRegExp=function(t){t.parseRegExpSource="^"+this._buildParseRegExpParts(t.parts)+"$",t.parseRegExp=new RegExp(t.parseRegExpSource)},t.prototype._buildParseRegExpParts=function(t){var e,r,n,a="";for(e=0,r=t.length;r>e;++e)n=t[e],a+="string"==typeof n?p(n):"param"===n.what?"("+(this._getParamValueRegExpSource(n.name)||d)+")":"(?:"+this._buildParseRegExpParts(n.parts)+")?";return a},t.prototype._getParamValueRegExpSource=function(t){var e,r,n=this._conditionRegExpSources||(this._conditionRegExpSources={}),o=this._conditions;return a(n,t)||(a(o,t)?(r=o[t],e=s(r)?"(?:"+r.join("|")+")":r+""):e=null,n[t]=e),n[t]},t.prototype._getParamValueRegExp=function(t){var e,r=this._conditionRegExps||(this._conditionRegExps={});return a(r,t)||(e=this._getParamValueRegExpSource(t),r[t]=e?new RegExp("^"+e+"$"):null),r[t]},t.prototype._checkParamValue=function(t,e){var r=this._getParamValueRegExp(t);return r?r.test(e):!0},t.prototype._buildBuildFn=function(t){t.buildFnSource="var h=({}).hasOwnProperty;return "+this._buildBuildFnParts(t.parts)+";",t.buildFn=new Function("p",t.buildFnSource)},t.prototype._buildBuildFnParts=function(t){var e,r,n,o,s,i,u='""',f=this._options.defaults;for(e=0,r=t.length;r>e;++e)if(s=t[e],"string"==typeof s)u+='+"'+p(s)+'"';else if("param"===s.what)u+='+(h.call(p,"'+p(s.name)+'")?'+'p["'+p(s.name)+'"]:'+(f&&a(f,s.name)?'"'+p(f[s.name])+'"':'""')+")";else{for(u+="+((false",n=0,o=s.dependOnParams.length;o>n;++n)i=s.dependOnParams[n],u+='||(h.call(p,"'+p(i)+'")'+(f&&a(f,i)?'&&p["'+p(i)+'"]!=="'+p(f[i])+'"':"")+")";u+=")?("+this._buildBuildFnParts(s.parts)+'):"")'}return u},t.prototype._isDataMatched=function(t){var e,r=this._options.data;if("function"==typeof t)return Boolean(t(r));if(t&&"object"==typeof t)for(e in t)if(a(t,e)&&(!r||"object"!=typeof r||r[e]!==t[e]))return!1;return!0},t.prototype.match=function(t,e){var r,n,o,p,u,f,h,l,c,m,d=null,g=this._options,_=g.postMatch,P=g.defaults,y=this._patterns;if("string"!=typeof t||e&&!this._isDataMatched(e))return d;for(m in y)if(a(y,m)&&(c=y[m],r=t.match(c.parseRegExp))){l=c;break}if(r){for(d={},n=1,o=r.length;o>n;++n)if("undefined"!=typeof r[n]&&""!==r[n])if(p=l.params[n-1],p===E)h=r[n];else if(p===b){if(t.charAt(t.length-2)===x)return null}else d[p]=r[n];if(h&&g.useQueryString!==!1){f=i.parse(h);for(p in f)if(a(f,p)&&!a(d,p))if(u=f[p],l.mainParams[p]&&s(u)&&(u=u[0]),s(u))for(d[p]=[],n=0,o=u.length;o>n;++n)this._checkParamValue(p,u[n])&&d[p].push(u[n]);else this._checkParamValue(p,u)&&(d[p]=u)}for(p in P)a(P,p)&&!a(d,p)&&(d[p]=P[p])}return d&&"function"==typeof _&&(d=_(d),d&&"object"==typeof d||(d=null)),d},t.prototype._getPatternParamsIntersection=function(t,e){var r,n,o,s=[];for(r=0,n=t.length;n>r;r++)o=t[r],a(e,o)&&s.push(o);return s},t.prototype._getPatternForBuild=function(t,e){var r,n,o,s,i,p,u,f,h=this._patterns,l=0,c=null;for(n in h)if(a(h,n)){if(o=h[n],e){if(i=o.requiredParams,p=i.length,f=this._getPatternParamsIntersection(i,t),p!==f.length)continue;u=o.optionalParams,f=this._getPatternParamsIntersection(u,t),r=f.length*g+p*_}else s=o.params,f=this._getPatternParamsIntersection(s,t),r=f.length*_;r||(r=P),r>l&&(l=r,c=o)}return c},t.prototype.build=function(t,e){var r,n,o,s,p,u=this._options,f={},h=u.useQueryString!==!1,l={},c=u.preBuild;if(p=t||{},"function"==typeof c&&(p=c(p)),n=this._getPatternForBuild(p,e),!n)return null;for(o in p)if(a(p,o)&&null!==p[o]&&"undefined"!=typeof p[o]&&(n.mainParams[o]||h)){if(s=p[o],e&&!this._checkParamValue(o,s))return null;(n.mainParams[o]?f:l)[o]=s}return h&&(r=i.stringify(l),r&&(f[E]=r)),n.buildFn(f)},t.prototype.getData=function(){return this._options.data},t.prototype.getName=function(){return this._options.name},r.exports=t,r.exports},"./router":function(){function t(){return this instanceof t?(this._routes=[],this._routesByName={},void 0):new t}var r={},n=e("./route");return t.prototype.addRoute=function(t){var e,r;return e=new n(t),this._routes.push(e),r=e.getName(),r&&(this._routesByName[r]=e),e},t.prototype.find=function(){var t,e,r,n=[],a=this._routes;for(e=0,r=a.length;r>e;++e)t=a[e].match.apply(a[e],arguments),null!==t&&n.push([a[e],t]);return n},t.prototype.findFirst=function(){var t,e,r,n=this._routes;for(e=0,r=n.length;r>e;++e)if(t=n[e].match.apply(n[e],arguments),null!==t)return[n[e],t];return null},t.prototype.getRouteByName=function(t){return this._routesByName[t]||null},t.Route=n,r.exports=t,r.exports}}[t]()}var r=e("./router"),n=!0;"object"==typeof exports&&"string"!=typeof exports.nodeName&&(module.exports=r,n=!1),t.modules&&modules.define&&modules.require&&(modules.define("susanin",function(t){t(r)}),n=!1),"function"==typeof t.define&&define.amd&&(define(function(){return r}),n=!1),n&&(t.Susanin=r)}(this);